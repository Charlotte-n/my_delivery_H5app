import{d as s,m as a,b as e,c as r,f as t,u as o,t as i,p as d,h as l,_ as n,r as c,o as u,X as m,e as v,w as p,F as f,i as _,v as h,k as I,E as w}from"./index-sPpT8lAe.js";import{H as g}from"./index-A0Mteg1b.js";import{f as k}from"./formate_img-ey60ccwK.js";import{g as j}from"./order-mLyNH4mj.js";import{l as x}from"./listenBottomOut-Y2N2QcEh.js";import{u as y}from"./position-QZdYf7CS.js";import"./index-Li4iQ5F3.js";const b=s=>(d("data-v-74837794"),s=s(),l(),s),E={class:"img"},C=["src"],z={class:"order"},B={class:"shop_name"},L=b((()=>t("span",{class:"arrow"},">",-1))),$={class:"time"},D={class:"order-status"},F={class:"middle-price"},H=b((()=>t("div",{class:"zhanwei"},null,-1))),O=b((()=>t("div",{class:"order_name"},"价格",-1))),S={class:"price"},X=n(s({__name:"orderlist-item",props:{orderInfo:{}},setup(s){const d=a(),l=s,n=()=>{d.push({path:"/order/detail/"+l.orderInfo.id})},c=()=>{d.push({path:"/deliveryShopDetail/"+l.orderInfo.restaurant_id})};return(s,a)=>(e(),r("div",null,[t("div",{class:"desc",onClick:n},[t("div",E,[t("img",{src:o(k)(l.orderInfo.restaurant_image_url),alt:""},null,8,C)]),t("div",z,[t("div",B,[t("span",null,i(l.orderInfo.restaurant_name),1),L]),t("div",$,i(l.orderInfo.formatted_created_at),1)]),t("div",D,i(l.orderInfo.status_bar.title),1)]),t("div",F,[H,O,t("div",S," ￥"+i(l.orderInfo.basket.packing_fee.price),1)]),t("div",{class:"status"},[t("button",{onClick:c},"再来一单")])]))}}),[["__scopeId","data-v-74837794"]]),q={class:"orderlist_container"},A={class:"orderlists"},G=(s=>(d("data-v-0596c949"),s=s(),l(),s))((()=>t("div",{style:{height:"10vw"}},null,-1))),J=n(s({__name:"index",setup(s){const i=a(),d=y(),l=c(!1),n=c([]),k=c({limit:20,offset:0}),b=async()=>{const s=await j(k.value);0!==s.length?(k.value.offset+=20,n.value=[...n.value,...s]):l.value=!0},E=x(l,b),C=()=>{i.push({path:`/takeaway/${d.geohash}`})};return u((()=>{b(),window.addEventListener("scroll",E)})),m((()=>{window.removeEventListener("scroll",E)})),(s,a)=>{const i=w;return e(),r("div",q,[t("header",null,[v(g,null,{first:p((()=>[v(i,{size:"20",onClick:C},{default:p((()=>[v(o(h))])),_:1})])),second:p((()=>[I(" 订单列表 ")])),_:1})]),t("div",A,[(e(!0),r(f,null,_(n.value,(s=>(e(),r("div",{class:"orderlist-item",key:s.id},[v(X,{orderInfo:s},null,8,["orderInfo"])])))),128))]),G])}}}),[["__scopeId","data-v-0596c949"]]);export{J as default};
