import{x as e,y as t,z as a,A as n,B as o,r as i,C as l,u as r,D as s,o as u,G as c,H as v,I as d,J as f,d as p,K as m,b as h,c as g,f as y,j as I,w as _,L as w,M as k,E as C,N as b,e as x,O as S,P as T,T as E,s as M,Q as N,R as j,S as L,F as H,i as $,t as P,U as A,V as B,W as O,X as z,Y as V,Z as W,$ as R,m as D,_ as K,a0 as Y,p as J,h as U,q as X,l as Z,a as q,a1 as F,k as G,n as Q}from"./index-zZAhMCbv.js";import{H as ee}from"./index-mOtuIImo.js";import{g as te,a as ae}from"./delivery-home-AL4ocHtg.js";import{u as ne}from"./index-DQNojh1C.js";import{f as oe}from"./vnode-g0EdeUyk.js";import{i as ie,a as le,r as re}from"./isObject-QEGFV2bT.js";import{S as se}from"./index-mvo-FBWV.js";import{l as ue}from"./listenBottomOut-Y2N2QcEh.js";import{b as ce}from"./city-Htg1y6qh.js";import{u as ve}from"./position-mHHIGalF.js";import"./index-Li4iQ5F3.js";var de=/\s/;var fe=/^\s+/;function pe(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&de.test(e.charAt(t)););return t}(e)+1).replace(fe,""):e}var me=NaN,he=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^0o[0-7]+$/i,Ie=parseInt;function _e(e){if("number"==typeof e)return e;if(ie(e))return me;if(le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=pe(e);var a=ge.test(e);return a||ye.test(e)?Ie(e.slice(2),a?2:8):he.test(e)?me:+e}const we=function(){return re.Date.now()};var ke="Expected a function",Ce=Math.max,be=Math.min;function xe(e,t,a){var n,o,i,l,r,s,u=0,c=!1,v=!1,d=!0;if("function"!=typeof e)throw new TypeError(ke);function f(t){var a=n,i=o;return n=o=void 0,u=t,l=e.apply(i,a)}function p(e){var a=e-s;return void 0===s||a>=t||a<0||v&&e-u>=i}function m(){var e=we();if(p(e))return h(e);r=setTimeout(m,function(e){var a=t-(e-s);return v?be(a,i-(e-u)):a}(e))}function h(e){return r=void 0,d&&n?f(e):(n=o=void 0,l)}function g(){var e=we(),a=p(e);if(n=arguments,o=this,s=e,a){if(void 0===r)return function(e){return u=e,r=setTimeout(m,t),c?f(e):l}(s);if(v)return clearTimeout(r),r=setTimeout(m,t),f(s)}return void 0===r&&(r=setTimeout(m,t)),l}return t=_e(t)||0,le(a)&&(c=!!a.leading,i=(v="maxWait"in a)?Ce(_e(a.maxWait)||0,t):i,d="trailing"in a?!!a.trailing:d),g.cancel=function(){void 0!==r&&clearTimeout(r),u=0,n=s=o=r=void 0},g.flush=function(){return void 0===r?l:h(we())},g}function Se(e,t,a){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return le(a)&&(n="leading"in a?!!a.leading:n,o="trailing"in a?!!a.trailing:o),xe(e,t,{leading:n,maxWait:t,trailing:o})}const Te=(a,n)=>{const o={},i=e([]);return{children:i,addChild:e=>{o[e.uid]=e,i.value=((e,a,n)=>oe(e.subTree).filter((e=>{var n;return t(e)&&(null==(n=e.type)?void 0:n.name)===a&&!!e.component})).map((e=>e.component.uid)).map((e=>n[e])).filter((e=>!!e)))(a,n,o)},removeChild:e=>{delete o[e],i.value=i.value.filter((t=>t.uid!==e))}}},Ee=a({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Me={change:(e,t)=>[e,t].every(n)},Ne=Symbol("carouselContextKey"),je=(a,n,p)=>{const{children:m,addChild:h,removeChild:g}=Te(f(),"ElCarouselItem"),y=o(),I=i(-1),_=i(null),w=i(!1),k=i(),C=i(0),b=i(!0),x=l((()=>"never"!==a.arrow&&!r(E))),S=l((()=>m.value.some((e=>e.props.label.toString().length>0)))),T=l((()=>"card"===a.type)),E=l((()=>"vertical"===a.direction)),M=l((()=>"auto"!==a.height?{height:a.height}:{height:`${C.value}px`,overflow:"hidden"})),N=Se((e=>{P(e)}),300,{trailing:!0}),j=Se((e=>{!function(e){"hover"===a.trigger&&e!==I.value&&(I.value=e)}(e)}),300);function L(){_.value&&(clearInterval(_.value),_.value=null)}function H(){a.interval<=0||!a.autoplay||_.value||(_.value=setInterval((()=>$()),a.interval))}const $=()=>{I.value<m.value.length-1?I.value=I.value+1:a.loop&&(I.value=0)};function P(e){if(d(e)){const t=m.value.filter((t=>t.props.name===e));t.length>0&&(e=m.value.indexOf(t[0]))}if(e=Number(e),Number.isNaN(e)||e!==Math.floor(e))return;const t=m.value.length,n=I.value;I.value=e<0?a.loop?t-1:0:e>=t?a.loop?0:t-1:e,n===I.value&&A(n),B()}function A(e){m.value.forEach(((t,a)=>{t.translateItem(a,I.value,e)}))}function B(){L(),a.pauseOnHover||H()}s((()=>I.value),((e,t)=>{A(t),b.value&&(e%=2,t%=2),t>-1&&n("change",e,t)})),s((()=>a.autoplay),(e=>{e?H():L()})),s((()=>a.loop),(()=>{P(I.value)})),s((()=>a.interval),(()=>{B()}));const O=e();return u((()=>{s((()=>m.value),(()=>{m.value.length>0&&P(a.initialIndex)}),{immediate:!0}),O.value=ne(k.value,(()=>{A()})),H()})),c((()=>{L(),k.value&&O.value&&O.value.stop()})),v(Ne,{root:k,isCardType:T,isVertical:E,items:m,loop:a.loop,addItem:h,removeItem:g,setActiveItem:P,setContainerHeight:function(e){"auto"===a.height&&(C.value=e)}}),{root:k,activeIndex:I,arrowDisplay:x,hasLabel:S,hover:w,isCardType:T,items:m,isVertical:E,containerStyle:M,isItemsTwoLength:b,handleButtonEnter:function(e){r(E)||m.value.forEach(((t,a)=>{e===function(e,t){var a,n,o,i;const l=r(m),s=l.length;if(0===s||!e.states.inStage)return!1;const u=t+1,c=t-1,v=s-1,d=l[v].states.active,f=l[0].states.active,p=null==(n=null==(a=l[u])?void 0:a.states)?void 0:n.active,h=null==(i=null==(o=l[c])?void 0:o.states)?void 0:i.active;return t===v&&f||p?"left":!!(0===t&&d||h)&&"right"}(t,a)&&(t.states.hover=!0)}))},handleButtonLeave:function(){r(E)||m.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){I.value=e},handleMouseEnter:function(){w.value=!0,a.pauseOnHover&&L()},handleMouseLeave:function(){w.value=!1,H()},setActiveItem:P,prev:function(){P(I.value-1)},next:function(){P(I.value+1)},PlaceholderItem:function(){var e;const n=null==(e=y.default)?void 0:e.call(y);if(!n)return null;const o=oe(n).filter((e=>t(e)&&"ElCarouselItem"===e.type.name));return 2===(null==o?void 0:o.length)&&a.loop&&!T.value?(b.value=!0,o):(b.value=!1,null)},isTwoLengthShow:e=>!b.value||(I.value<=1?e<=1:e>1),throttledArrowClick:N,throttledIndicatorHover:j}},Le=["onMouseenter","onClick"],He={key:0},$e=p({name:"ElCarousel"});var Pe=A(p({...$e,props:Ee,emits:Me,setup(e,{expose:t,emit:a}){const n=e,{root:o,activeIndex:i,arrowDisplay:s,hasLabel:u,hover:c,isCardType:v,items:d,isVertical:f,containerStyle:p,handleButtonEnter:A,handleButtonLeave:B,handleIndicatorClick:O,handleMouseEnter:z,handleMouseLeave:V,setActiveItem:W,prev:R,next:D,PlaceholderItem:K,isTwoLengthShow:Y,throttledArrowClick:J,throttledIndicatorHover:U}=je(n,a),X=m("carousel"),Z=l((()=>{const e=[X.b(),X.m(n.direction)];return r(v)&&e.push(X.m("card")),e})),q=l((()=>{const e=[X.e("indicators"),X.em("indicators",n.direction)];return r(u)&&e.push(X.em("indicators","labels")),"outside"===n.indicatorPosition&&e.push(X.em("indicators","outside")),r(f)&&e.push(X.em("indicators","right")),e}));return t({setActiveItem:W,prev:R,next:D}),(e,t)=>(h(),g("div",{ref_key:"root",ref:o,class:w(r(Z)),onMouseenter:t[6]||(t[6]=k(((...e)=>r(z)&&r(z)(...e)),["stop"])),onMouseleave:t[7]||(t[7]=k(((...e)=>r(V)&&r(V)(...e)),["stop"]))},[y("div",{class:w(r(X).e("container")),style:L(r(p))},[r(s)?(h(),I(E,{key:0,name:"carousel-arrow-left",persisted:""},{default:_((()=>[T(y("button",{type:"button",class:w([r(X).e("arrow"),r(X).em("arrow","left")]),onMouseenter:t[0]||(t[0]=e=>r(A)("left")),onMouseleave:t[1]||(t[1]=(...e)=>r(B)&&r(B)(...e)),onClick:t[2]||(t[2]=k((e=>r(J)(r(i)-1)),["stop"]))},[x(r(C),null,{default:_((()=>[x(r(b))])),_:1})],34),[[S,("always"===e.arrow||r(c))&&(n.loop||r(i)>0)]])])),_:1})):M("v-if",!0),r(s)?(h(),I(E,{key:1,name:"carousel-arrow-right",persisted:""},{default:_((()=>[T(y("button",{type:"button",class:w([r(X).e("arrow"),r(X).em("arrow","right")]),onMouseenter:t[3]||(t[3]=e=>r(A)("right")),onMouseleave:t[4]||(t[4]=(...e)=>r(B)&&r(B)(...e)),onClick:t[5]||(t[5]=k((e=>r(J)(r(i)+1)),["stop"]))},[x(r(C),null,{default:_((()=>[x(r(N))])),_:1})],34),[[S,("always"===e.arrow||r(c))&&(n.loop||r(i)<r(d).length-1)]])])),_:1})):M("v-if",!0),x(r(K)),j(e.$slots,"default")],6),"none"!==e.indicatorPosition?(h(),g("ul",{key:0,class:w(r(q))},[(h(!0),g(H,null,$(r(d),((t,a)=>T((h(),g("li",{key:a,class:w([r(X).e("indicator"),r(X).em("indicator",e.direction),r(X).is("active",a===r(i))]),onMouseenter:e=>r(U)(a),onClick:k((e=>r(O)(a)),["stop"])},[y("button",{class:w(r(X).e("button"))},[r(u)?(h(),g("span",He,P(t.props.label),1)):M("v-if",!0)],2)],42,Le)),[[S,r(Y)(a)]]))),128))],2)):M("v-if",!0)],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Ae=a({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Be=(e,t)=>{const a=B(Ne),n=f(),o=.83,l=i(),s=i(!1),c=i(0),v=i(1),d=i(!1),p=i(!1),m=i(!1),h=i(!1),{isCardType:g,isVertical:y}=a;const I=(e,t,n)=>{var i;const s=r(g),u=null!=(i=a.items.value.length)?i:Number.NaN,f=e===t;s||V(n)||(h.value=f||e===n),!f&&u>2&&a.loop&&(e=function(e,t,a){const n=a-1,o=a/2;return 0===t&&e===n?-1:t===n&&0===e?a:e<t-1&&t-e>=o?a+1:e>t+1&&e-t>=o?-2:e}(e,t,u));const I=r(y);d.value=f,s?(m.value=Math.round(Math.abs(e-t))<=1,c.value=function(e,t){var n,o;const i=r(y)?(null==(n=a.root.value)?void 0:n.offsetHeight)||0:(null==(o=a.root.value)?void 0:o.offsetWidth)||0;return m.value?i*(1.17*(e-t)+1)/4:e<t?-1.83*i/4:3.83*i/4}(e,t),v.value=r(d)?1:o):c.value=function(e,t,n){const o=a.root.value;return o?((n?o.offsetHeight:o.offsetWidth)||0)*(e-t):0}(e,t,I),p.value=!0,f&&l.value&&a.setContainerHeight(l.value.offsetHeight)};return u((()=>{a.addItem({props:e,states:O({hover:s,translate:c,scale:v,active:d,ready:p,inStage:m,animating:h}),uid:n.uid,translateItem:I})})),z((()=>{a.removeItem(n.uid)})),{carouselItemRef:l,active:d,animating:h,hover:s,inStage:m,isVertical:y,translate:c,isCardType:g,scale:v,ready:p,handleItemClick:function(){if(a&&r(g)){const e=a.items.value.findIndex((({uid:e})=>e===n.uid));a.setActiveItem(e)}}}},Oe=p({name:"ElCarouselItem"});var ze=A(p({...Oe,props:Ae,setup(e){const t=e,a=m("carousel"),{carouselItemRef:n,active:o,animating:i,hover:s,inStage:u,isVertical:c,translate:v,isCardType:d,scale:f,ready:p,handleItemClick:y}=Be(t),I=l((()=>({transform:[`${"translate"+(r(c)?"Y":"X")}(${r(v)}px)`,`scale(${r(f)})`].join(" ")})));return(e,t)=>T((h(),g("div",{ref_key:"carouselItemRef",ref:n,class:w([r(a).e("item"),r(a).is("active",r(o)),r(a).is("in-stage",r(u)),r(a).is("hover",r(s)),r(a).is("animating",r(i)),{[r(a).em("item","card")]:r(d),[r(a).em("item","card-vertical")]:r(d)&&r(c)}]),style:L(r(I)),onClick:t[0]||(t[0]=(...e)=>r(y)&&r(y)(...e))},[r(d)?T((h(),g("div",{key:0,class:w(r(a).e("mask"))},null,2)),[[S,!r(o)]]):M("v-if",!0),j(e.$slots,"default")],6)),[[S,r(p)]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const Ve=W(Pe,{CarouselItem:ze}),We=R(ze),Re={class:"banner"},De=["onClick"],Ke=["src"],Ye={class:"category_title"},Je=K(p({__name:"index",setup(e){const t=D(),a=i(),n=(e,t)=>{const a=[],n=Math.floor(e.length/t);for(let o=0;o<n;o++)a.push(e.slice(o*t,(o+1)*t));return a},o=e=>{let t=decodeURIComponent(e.split("=")[1].replace("&target_name",""));return/restaurant_category_id/gi.test(t)?JSON.parse(t).restaurant_category_id.id:""};return u((()=>{(async()=>{const e=await te(),t=n(e,8);a.value=t})()})),(e,n)=>{const i=We,l=Ve;return h(),g("div",Re,[x(l,{autoplay:!1,arrow:"never",height:"50vw"},{default:_((()=>[(h(!0),g(H,null,$(a.value,(e=>(h(),I(i,{key:e,class:"category"},{default:_((()=>[(h(!0),g(H,null,$(e,(e=>(h(),g("div",{key:e.id,class:"food_cate",onClick:a=>((e,a)=>{const n=o(e);t.push({name:"detail_food",params:{id:392|n,title:a}})})(e.link,e.title)},[y("img",{src:"https://fuss10.elemecdn.com"+e.image_url,alt:""},null,8,Ke),y("div",Ye,P(e.title),1)],8,De)))),128))])),_:2},1024)))),128))])),_:1})])}}}),[["__scopeId","data-v-922a7507"]]),Ue={class:"nearby_business"},Xe={class:"title"},Ze=(e=>(J("data-v-0e3500e4"),e=e(),U(),e))((()=>y("span",null,"附近商家",-1))),qe={class:"businesses"},Fe=K(p({__name:"index",props:{PosiInfo:{}},setup(e){const t=e,a=i(!1),n=i([]),o=i({latitude:String(t.PosiInfo.latitude),longitude:String(t.PosiInfo.longitude),limit:20,offset:0}),l=async()=>{const e=await ae(o.value);0!==e.length?(o.value.offset+=20,n.value=[...n.value,...e]):a.value=!0},s=ue(a,l);return u((()=>{l(),window.addEventListener("scroll",s)})),z((()=>{window.removeEventListener("scroll",s,!1)})),(e,t)=>{const a=C;return h(),g("div",Ue,[y("div",Xe,[x(a,{size:"4vw"},{default:_((()=>[x(r(Y))])),_:1}),Ze]),y("div",qe,[(h(!0),g(H,null,$(n.value,(e=>(h(),g("div",{key:e.id},[x(se,{shopListInfo:e},null,8,["shopListInfo"])])))),128))])])}}}),[["__scopeId","data-v-0e3500e4"]]),Ge={class:"header-v1"},Qe={key:0},et={key:1},tt={class:"banner"},at={class:"home_nearby-business"},nt=(e=>(J("data-v-0030c118"),e=e(),U(),e))((()=>y("div",{class:"zhan"},null,-1))),ot=K(p({__name:"index",setup(e){const t=D(),a=X(),n=ve(),o=Z(),l=i(""),s=i({}),c=()=>{t.push({path:"/search"})},v=()=>{t.push({path:"/user"})};return u((()=>{(async()=>{const e=String(a.params.geohash),t=await ce(e);l.value=t.name,s.value=t,n.$patch({longitude:t.longitude,latitude:t.latitude})})()})),(e,t)=>{const a=C,n=q("router-link");return h(),g(H,null,[y("header",Ge,[x(ee,{cityName:l.value},{left:_((()=>[x(a,{onClick:c,size:"25"},{default:_((()=>[x(r(F))])),_:1})])),right:_((()=>[""==r(o).userInfo.user_id||null==r(o).userInfo.user_id?(h(),g("div",Qe,[x(n,{to:"/",class:"login"},{default:_((()=>[G("登录")])),_:1}),x(n,{to:"/",class:"register"},{default:_((()=>[G("注册")])),_:1})])):(h(),g("div",et,[x(a,{size:"30",onClick:v},{default:_((()=>[x(r(Q))])),_:1})]))])),_:1},8,["cityName"])]),y("main",null,[y("div",tt,[x(Je)]),y("div",at,[x(Fe,{PosiInfo:s.value},null,8,["PosiInfo"])]),nt])],64)}}}),[["__scopeId","data-v-0030c118"]]);export{ot as default};
