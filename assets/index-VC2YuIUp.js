import{d as a,r as e,l as s,o,c as l,f as t,e as i,w as r,P as n,am as d,s as c,b as u,u as p,v as m,k as v,p as f,h as j,E as _,_ as h}from"./index-zZAhMCbv.js";import{E as w}from"./el-button-9RIKrnGK.js";import{E as g,a as x}from"./el-switch-oAQm6Qx_.js";import{H as y}from"./index-71HoLv4w.js";import{g as k,a as V,b as U}from"./user-tJDYPP4E.js";import"./index-Uc6dSlZx.js";import"./use-global-config-o3-Pb3uY.js";import"./index-IyIUTbE-.js";import"./get-bkzyVv_4.js";import"./isObject-QEGFV2bT.js";import"./index-kybN79Ow.js";import"./index-xMzypBxJ.js";import"./use-form-item-BdUKzQvZ.js";import"./constants-JSdZFONt.js";import"./index-ChWLkOVQ.js";import"./icon-kAZI87Oh.js";import"./index-s6KMGca5.js";import"./event-DkVV3hnh.js";import"./error-lyDbv7Kx.js";import"./index-DQNojh1C.js";import"./typescript-fEetNX7U.js";import"./aria-ClGo7ZJR.js";import"./index-Li4iQ5F3.js";const b={class:"login_container"},C={class:"form"},E={class:"form-item"},I={key:0,class:"username_warning"},P={class:"password form-item"},z={key:1,class:"password_warning"},H={class:"verify_code"},O={class:"code"},B={class:"code_img"},F=["src"],G=(a=>(f("data-v-825059ad"),a=a(),j(),a))((()=>t("span",null,"看不清",-1))),J={key:2,class:"code_warning"},K={class:"login"},L=h(a({__name:"index",setup(a){const f=e(!1),j=e(),h=s(),L=()=>{f.value?j.value.type="text":j.value.type="password"},M=()=>{history.go(-1)},N=e({}),Q=async()=>{const a=await k();N.value=a},R=e({username:"",password:"",captcha_code:""}),T=e(!1),W=e(!1),q=e(!1),A=e(0),D=async()=>{if(""===R.value.username&&(T.value=!0,A.value=1),""===R.value.password&&(W.value=!0,A.value=1),""===R.value.captcha_code&&(q.value=!0,A.value=1),1!==A.value)try{if(0===(await V(R.value)).data.status){const a=await U(2);h.setUserInfo({user_id:"2",detail_userinfo:a}),history.go(-1)}}catch(a){g({message:"登录失败",type:"error"})}};return o((()=>{Q()})),(a,e)=>{const s=_,o=x,h=w;return u(),l("div",b,[t("header",null,[i(y,null,{first:r((()=>[i(s,{size:"20",onClick:M},{default:r((()=>[i(p(m))])),_:1})])),second:r((()=>[v(" 密码登录 ")])),_:1})]),t("form",C,[t("div",E,[n(t("input",{type:"text",placeholder:"账号","onUpdate:modelValue":e[0]||(e[0]=a=>R.value.username=a)},null,512),[[d,R.value.username]])]),T.value?(u(),l("div",I," 请输入账号 ")):c("",!0),t("div",P,[n(t("input",{type:"password",placeholder:"密码",ref_key:"handlePassword",ref:j,"onUpdate:modelValue":e[1]||(e[1]=a=>R.value.password=a)},null,512),[[d,R.value.password]]),i(o,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),class:"ml-2",size:"large","inline-prompt":"",style:{"--el-switch-on-color":"#ff692f","--el-switch-off-color":"#ccc"},"active-text":"隐藏密码","inactive-text":"显示密码",onChange:L},null,8,["modelValue"])]),W.value?(u(),l("div",z," 请输入密码 ")):c("",!0),t("div",H,[n(t("input",{type:"text",placeholder:"验证码","onUpdate:modelValue":e[3]||(e[3]=a=>R.value.captcha_code=a),maxlength:"4"},null,512),[[d,R.value.captcha_code]]),t("div",O,[t("div",B,[t("img",{src:N.value.code,alt:""},null,8,F)]),t("div",{class:"change_code"},[G,t("span",{onClick:Q},"换一张")])])]),q.value?(u(),l("div",J," 请输入验证码 ")):c("",!0)]),t("div",K,[i(h,{onClick:D},{default:r((()=>[v("登录")])),_:1})])])}}}),[["__scopeId","data-v-825059ad"]]);export{L as default};
