import{d as a,r as e,n as s,o,c as l,f as t,e as i,w as r,l as n,ac as d,m as c,b as u,u as p,x as m,k as v,p as f,h as j,E as _,_ as h}from"./index-lwfdNeUd.js";import{E as w}from"./el-button-rNGE52nc.js";import{E as x,a as g}from"./el-switch-r-9qtLmf.js";import{H as y}from"./index-V_BAUGZc.js";import{g as k,a as V,b as U}from"./user-6cLxAl33.js";import"./index-r5-8JnZd.js";import"./use-global-config-JXa-0KUy.js";import"./index-0z1mzhXR.js";import"./get-LVbWSPPF.js";import"./index-3rhPArT_.js";import"./index-szXM9Nvp.js";import"./use-form-item-Bnbj2My-.js";import"./constants-JSdZFONt.js";import"./index-dKGF68uM.js";import"./icon-SqV2QUF4.js";import"./index-s6KMGca5.js";import"./event-DkVV3hnh.js";import"./error-lyDbv7Kx.js";import"./index-Xez66V75.js";import"./typescript-fEetNX7U.js";import"./aria-ClGo7ZJR.js";import"./index-fssVXj-i.js";const C={class:"login_container"},b={class:"form"},E={class:"form-item"},z={key:0,class:"username_warning"},H={class:"password form-item"},I={key:1,class:"password_warning"},P={class:"verify_code"},D={class:"code"},F={class:"code_img"},G=["src"],L=(a=>(f("data-v-825059ad"),a=a(),j(),a))((()=>t("span",null,"看不清",-1))),M={key:2,class:"code_warning"},N={class:"login"},O=h(a({__name:"index",setup(a){const f=e(!1),j=e(),h=s(),O=()=>{f.value?j.value.type="text":j.value.type="password"},Q=()=>{history.go(-1)},R=e({}),T=async()=>{const a=await k();R.value=a},W=e({username:"",password:"",captcha_code:""}),q=e(!1),A=e(!1),B=e(!1),J=e(0),K=async()=>{if(""===W.value.username&&(q.value=!0,J.value=1),""===W.value.password&&(A.value=!0,J.value=1),""===W.value.captcha_code&&(B.value=!0,J.value=1),1!==J.value)try{if(0===(await V(W.value)).data.status){const a=await U(2);h.setUserInfo({user_id:"2",detail_userinfo:a}),history.go(-1)}}catch(a){x({message:"登录失败",type:"error"})}};return o((()=>{T()})),(a,e)=>{const s=_,o=g,h=w;return u(),l("div",C,[t("header",null,[i(y,null,{first:r((()=>[i(s,{size:"20",onClick:Q},{default:r((()=>[i(p(m))])),_:1})])),second:r((()=>[v(" 密码登录 ")])),_:1})]),t("form",b,[t("div",E,[n(t("input",{type:"text",placeholder:"账号","onUpdate:modelValue":e[0]||(e[0]=a=>W.value.username=a)},null,512),[[d,W.value.username]])]),q.value?(u(),l("div",z," 请输入账号 ")):c("",!0),t("div",H,[n(t("input",{type:"password",placeholder:"密码",ref_key:"handlePassword",ref:j,"onUpdate:modelValue":e[1]||(e[1]=a=>W.value.password=a)},null,512),[[d,W.value.password]]),i(o,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),class:"ml-2",size:"large","inline-prompt":"",style:{"--el-switch-on-color":"#ff692f","--el-switch-off-color":"#ccc"},"active-text":"隐藏密码","inactive-text":"显示密码",onChange:O},null,8,["modelValue"])]),A.value?(u(),l("div",I," 请输入密码 ")):c("",!0),t("div",P,[n(t("input",{type:"text",placeholder:"验证码","onUpdate:modelValue":e[3]||(e[3]=a=>W.value.captcha_code=a),maxlength:"4"},null,512),[[d,W.value.captcha_code]]),t("div",D,[t("div",F,[t("img",{src:R.value.code,alt:""},null,8,G)]),t("div",{class:"change_code"},[L,t("span",{onClick:T},"换一张")])])]),B.value?(u(),l("div",M," 请输入验证码 ")):c("",!0)]),t("div",N,[i(h,{onClick:K},{default:r((()=>[v("登录")])),_:1})])])}}}),[["__scopeId","data-v-825059ad"]]);export{O as default};
