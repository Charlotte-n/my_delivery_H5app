import{ak as e,an as o,o as t,b4 as l,H as s,af as a,bg as n,L as r,bn as d,b1 as u,G as i,bf as c,a$ as f,bo as p,b0 as m,aL as v,A as y,ad as b,d as g,e as h,R as C,b3 as k,V as x,D as w,b as E,c as M,f as A,M as I,u as L,t as S,w as $,ah as B,j as R,E as F,m as D,S as j,U as T,ae as _,r as z,a1 as O,K as P,bi as Y,am as N,C as X,I as V,aJ as q,bp as H,P as U,l as W,T as Z,aX as G,Z as K}from"./index-mV6jAJcw.js";import{P as J}from"./vnode-cHJ0DHGx.js";import{i as Q,C as ee}from"./icon-LIJ6PI4v.js";import{u as oe}from"./index-HC5mE-n5.js";import{F as te,i as le,E as se}from"./focus-trap-3BigVCSW.js";import{U as ae}from"./event-DkVV3hnh.js";import{u as ne}from"./index-nURT9tW6.js";import{u as re}from"./index-W_5ooPIQ.js";import{a as de}from"./use-global-config-cR9LpW4d.js";import{t as ue}from"./error-lyDbv7Kx.js";import{u as ie}from"./index--GzJcAF9.js";let ce;const fe=(e,o,n)=>{let r={offsetX:0,offsetY:0};const d=o=>{const t=o.clientX,l=o.clientY,{offsetX:s,offsetY:n}=r,d=e.value.getBoundingClientRect(),u=d.left,i=d.top,c=d.width,f=d.height,p=document.documentElement.clientWidth,m=document.documentElement.clientHeight,v=-u+s,y=-i+n,b=p-u-c+s,g=m-i-f+n,h=o=>{const d=Math.min(Math.max(s+o.clientX-t,v),b),u=Math.min(Math.max(n+o.clientY-l,y),g);r={offsetX:d,offsetY:u},e.value&&(e.value.style.transform=`translate(${a(d)}, ${a(u)})`)},C=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",C)},u=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",d)};t((()=>{l((()=>{n.value?o.value&&e.value&&o.value.addEventListener("mousedown",d):u()}))})),s((()=>{u()}))},pe=(o,t={})=>{n(o)||ue("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||r("popup"),s=d((()=>l.bm("parent","hidden")));if(!e||u(document.body,s.value))return;let a=0,v=!1,y="0";const b=()=>{setTimeout((()=>{m(null==document?void 0:document.body,s.value),v&&document&&(document.body.style.width=y)}),200)};i(o,(o=>{if(!o)return void b();v=!u(document.body,s.value),v&&(y=document.body.style.width),a=(o=>{var t;if(!e)return 0;if(void 0!==ce)return ce;const l=document.createElement("div");l.className=`${o}-scrollbar__wrap`,l.style.visibility="hidden",l.style.width="100px",l.style.position="absolute",l.style.top="-9999px",document.body.appendChild(l);const s=l.offsetWidth;l.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",l.appendChild(a);const n=a.offsetWidth;return null==(t=l.parentNode)||t.removeChild(l),ce=s-n,ce})(l.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=c(document.body,"overflowY");a>0&&(t||"scroll"===n)&&v&&(document.body.style.width=`calc(100% - ${a}px)`),f(document.body,s.value)})),p((()=>b()))},me=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},ve=y({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:b([String,Array,Object])},zIndex:{type:b([String,Number])}});const ye=g({name:"ElOverlay",props:ve,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const l=r("overlay"),{onClick:s,onMousedown:a,onMouseup:n}=me(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?h("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:n},[C(o,"default")],J.STYLE|J.CLASS|J.PROPS,["onClick","onMouseup","onMousedown"]):k("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(o,"default")])}}),be=Symbol("dialogInjectionKey"),ge=y({center:Boolean,alignCenter:Boolean,closeIcon:{type:Q},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),he=["aria-level"],Ce=["aria-label"],ke=["id"],xe=g({name:"ElDialogContent"});var we=T(g({...xe,props:ge,emits:{close:()=>!0},setup(e){const t=e,{t:l}=oe(),{Close:s}=ee,{dialogRef:a,headerRef:n,bodyId:r,ns:d,style:u}=x(be),{focusTrapRef:i}=x(te),c=w((()=>[d.b(),d.is("fullscreen",t.fullscreen),d.is("draggable",t.draggable),d.is("align-center",t.alignCenter),{[d.m("center")]:t.center},t.customClass])),f=((...e)=>t=>{e.forEach((e=>{o(e)?e(t):e.value=t}))})(i,a),p=w((()=>t.draggable));return fe(a,n,p),(e,o)=>(E(),M("div",{ref:L(f),class:I(L(c)),style:j(L(u)),tabindex:"-1"},[A("header",{ref_key:"headerRef",ref:n,class:I(L(d).e("header"))},[C(e.$slots,"header",{},(()=>[A("span",{role:"heading","aria-level":e.ariaLevel,class:I(L(d).e("title"))},S(e.title),11,he)])),e.showClose?(E(),M("button",{key:0,"aria-label":L(l)("el.dialog.close"),class:I(L(d).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[h(L(F),{class:I(L(d).e("close"))},{default:$((()=>[(E(),R(B(e.closeIcon||L(s))))])),_:1},8,["class"])],10,Ce)):D("v-if",!0)],2),A("div",{id:L(r),class:I(L(d).e("body"))},[C(e.$slots,"default")],10,ke),e.$slots.footer?(E(),M("footer",{key:0,class:I(L(d).e("footer"))},[C(e.$slots,"footer")],2)):D("v-if",!0)],6))}}),[["__file","dialog-content.vue"]]);const Ee=y({...ge,appendToBody:Boolean,appendTo:{type:b(String),default:"body"},beforeClose:{type:b(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Me={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>_(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ae=["aria-label","aria-labelledby","aria-describedby"],Ie=g({name:"ElDialog",inheritAttrs:!1});const Le=K(T(g({...Ie,props:Ee,emits:Me,setup(o,{expose:l}){const s=o,n=X();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},w((()=>!!n.title))),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},w((()=>!!s.customClass)));const d=r("dialog"),u=z(),c=z(),f=z(),{visible:p,titleId:m,bodyId:v,style:y,overlayDialogStyle:b,rendered:g,zIndex:k,afterEnter:x,afterLeave:M,beforeLeave:S,handleClose:B,onModalClick:F,onOpenAutoFocus:T,onCloseAutoFocus:_,onCloseRequested:K,onFocusoutPrevented:J}=((o,l)=>{var s;const n=P().emit,{nextZIndex:r}=ne();let d="";const u=re(),c=re(),f=z(!1),p=z(!1),m=z(!1),v=z(null!=(s=o.zIndex)?s:r());let y,b;const g=de("namespace",Y),h=w((()=>{const e={},t=`--${g.value}-dialog`;return o.fullscreen||(o.top&&(e[`${t}-margin-top`]=o.top),o.width&&(e[`${t}-width`]=a(o.width))),e})),C=w((()=>o.alignCenter?{display:"flex"}:{}));function k(){null==b||b(),null==y||y(),o.openDelay&&o.openDelay>0?({stop:y}=N((()=>M()),o.openDelay)):M()}function x(){null==y||y(),null==b||b(),o.closeDelay&&o.closeDelay>0?({stop:b}=N((()=>A()),o.closeDelay)):A()}function E(){o.beforeClose?o.beforeClose((function(e){e||(p.value=!0,f.value=!1)})):x()}function M(){e&&(f.value=!0)}function A(){f.value=!1}return o.lockScroll&&pe(f),i((()=>o.modelValue),(e=>{e?(p.value=!1,k(),m.value=!0,v.value=le(o.zIndex)?r():v.value++,O((()=>{n("open"),l.value&&(l.value.scrollTop=0)}))):f.value&&x()})),i((()=>o.fullscreen),(e=>{l.value&&(e?(d=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=d)})),t((()=>{o.modelValue&&(f.value=!0,m.value=!0,k())})),{afterEnter:function(){n("opened")},afterLeave:function(){n("closed"),n(ae,!1),o.destroyOnClose&&(m.value=!1)},beforeLeave:function(){n("close")},handleClose:E,onModalClick:function(){o.closeOnClickModal&&E()},close:x,doClose:A,onOpenAutoFocus:function(){n("openAutoFocus")},onCloseAutoFocus:function(){n("closeAutoFocus")},onCloseRequested:function(){o.closeOnPressEscape&&E()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:u,bodyId:c,closed:p,style:h,overlayDialogStyle:C,rendered:m,visible:f,zIndex:v}})(s,u);V(be,{dialogRef:u,headerRef:c,bodyId:v,ns:d,rendered:g,style:y});const Q=me(F),ee=w((()=>s.draggable&&!s.fullscreen));return l({visible:p,dialogContentRef:f}),(e,o)=>(E(),R(G,{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},[h(Z,{name:"dialog-fade",onAfterEnter:L(x),onAfterLeave:L(M),onBeforeLeave:L(S),persisted:""},{default:$((()=>[W(h(L(ye),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":L(k)},{default:$((()=>[A("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:L(m),"aria-describedby":L(v),class:I(`${L(d).namespace.value}-overlay-dialog`),style:j(L(b)),onClick:o[0]||(o[0]=(...e)=>L(Q).onClick&&L(Q).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>L(Q).onMousedown&&L(Q).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>L(Q).onMouseup&&L(Q).onMouseup(...e))},[h(L(se),{loop:"",trapped:L(p),"focus-start-el":"container",onFocusAfterTrapped:L(T),onFocusAfterReleased:L(_),onFocusoutPrevented:L(J),onReleaseRequested:L(K)},{default:$((()=>[L(g)?(E(),R(we,q({key:0,ref_key:"dialogContentRef",ref:f},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:L(ee),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,"aria-level":e.headerAriaLevel,onClose:L(B)}),H({header:$((()=>[e.$slots.title?C(e.$slots,"title",{key:1}):C(e.$slots,"header",{key:0,close:L(B),titleId:L(m),titleClass:L(d).e("title")})])),default:$((()=>[C(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:$((()=>[C(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):D("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ae)])),_:3},8,["mask","overlay-class","z-index"]),[[U,L(p)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}}),[["__file","dialog.vue"]]));export{Le as E};
