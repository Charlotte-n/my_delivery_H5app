import{d as l,m as s,q as a,l as e,r as n,C as i,o as r,c as d,f as u,e as t,w as o,u as c,t as p,F as v,i as _,s as m,E as f,b as y,v as h,n as k,ag as g,g as C,bh as j,p as x,h as z,_ as b}from"./index-eoNkYDbX.js";import{d as w}from"./user-tJDYPP4E.js";import{a as I}from"./order-mLyNH4mj.js";import{u as A}from"./cart-Ub3Yjiw9.js";import{f as O}from"./formate_img-ey60ccwK.js";import{e as P}from"./delivery-home-AL4ocHtg.js";import{u as R}from"./order-dmlNNn1z.js";import"./index-Li4iQ5F3.js";const q=l=>(x("data-v-b5458309"),l=l(),z(),l),B={class:"header"},D={class:"left"},E=q((()=>u("div",{class:"middle"},[u("span",{class:"text1-ellipsis text"}," 确认订单 ")],-1))),F={class:"right"},L={class:"icon_location"},Y={class:"detail_address"},G={class:"user_info"},H={class:"address_info"},J={class:"icon_right"},K={class:"arrive_time"},M=q((()=>u("div",{class:"left"},"送达时间",-1))),N={class:"right"},Q={class:"pay"},S=q((()=>u("span",null,"支付方式",-1))),T=q((()=>u("span",null,"在线支付",-1))),U=q((()=>u("div",{class:"red_package"},[u("span",null,"红包 "),u("span",null,"暂时只在饿了么APP中支持 ")],-1))),V={class:"orderlist"},W={class:"order_header"},X=["src"],Z={class:"title"},$={class:"order_content"},ll={class:"num"},sl=q((()=>u("span",null,"餐盒",-1))),al=q((()=>u("span",null,"配送费",-1))),el={class:"all_money"},nl=q((()=>u("span",null,"订单",-1))),il={class:"money"},rl=q((()=>u("span",null,"待支付",-1))),dl=q((()=>u("div",null,null,-1))),ul={class:"order"},tl=q((()=>u("span",null,"订单备注",-1))),ol={key:0,class:"text1-ellipsis"},cl={key:1},pl=q((()=>u("span",null,"发票抬头",-1))),vl=q((()=>u("span",null,"不需要开发票",-1))),_l=q((()=>u("div",{style:{height:"10vw"}},null,-1))),ml=q((()=>u("div",{class:"left"},"待支付 ￥1349",-1))),fl={key:0,class:"pay_method_mask"},yl=q((()=>u("div",{class:"title"},"支付方式",-1))),hl=q((()=>u("span",{style:{color:"rgba(115, 115, 115, 0.3)","font-size":"4.5vw"}},"货到付款(商家不知道货到付款)",-1))),kl=q((()=>u("span",{style:{"font-size":"4.5vw"}},"在线支付",-1))),gl=b(l({__name:"index",setup(l){const x=s(),z=a(),b=e(),q=A(),gl=R(),Cl=z.params.restaurant_id,jl=()=>{history.go(-1)},xl=b.address,zl=n({}),bl=n([]),wl=n({}),Il=i((()=>{var l;return null==(l=q.cartItems[Cl])?void 0:l.reduce(((l,s)=>l+s.count*s.price),0)})),Al=n(!1),Ol=()=>{Al.value=!1},Pl=()=>{Al.value=!Al.value};return r((()=>{(async()=>{if(0===Object.keys(b.address).length){const l=await w(b.userInfo.user_id);b.setAddress(l[0])}zl.value=await I(b.userInfo.user_id,Cl),bl.value=q.CartList(Cl),wl.value=await P(Cl)})()})),(l,s)=>{var a,e;const n=f;return y(),d(v,null,[u("header",null,[u("div",B,[u("div",D,[t(n,{size:"25",onClick:jl},{default:o((()=>[t(c(h))])),_:1})]),E,u("div",F,[t(n,{size:"20"},{default:o((()=>[t(c(k))])),_:1})])])]),u("main",null,[u("div",{class:"address",onClick:s[0]||(s[0]=l=>c(x).push({path:"/order/pay/address"}))},[u("div",L,[t(n,{size:"20"},{default:o((()=>[t(c(g))])),_:1})]),u("div",Y,[u("div",G,[u("span",null,p(c(xl).name),1),u("span",null,p(1===c(xl).sex?"女士":"先生"),1),u("span",null,p(c(xl).phone),1)]),u("div",H,[u("span",null,p(c(xl).tag),1),u("span",null,p(c(xl).address),1)])]),u("div",J,[t(n,null,{default:o((()=>[t(c(C))])),_:1})])]),u("div",K,[M,u("div",N,[u("span",null,"尽快送达 | 预计"+p(wl.value.order_lead_time)+"分钟送达",1),u("span",null,p(null==(a=wl.value.delivery_mode)?void 0:a.text),1)])]),u("div",Q,[u("div",{class:"pay_method",onClick:Pl},[S,T,u("span",null,[t(n,{size:"12",color:"#666666"},{default:o((()=>[t(c(C))])),_:1})])]),U]),u("div",V,[u("div",W,[u("img",{src:c(O)(wl.value.image_path),alt:""},null,8,X),u("div",Z,p(null==(e=zl.value._doc)?void 0:e.restaurant_name),1)]),u("div",$,[u("ul",null,[(y(!0),d(v,null,_(bl.value,(l=>(y(),d("li",{key:l.item_id},[u("span",null,p(l.name),1),u("span",ll,"x "+p(l.count),1),u("span",null,"￥"+p(l.price),1)])))),128)),u("li",null,[sl,u("span",null,"￥"+p(wl.value.float_delivery_fee),1)]),u("li",null,[al,u("span",null,"￥"+p(wl.value.float_delivery_fee),1)])])]),u("div",el,[nl,u("span",il,"￥"+p(Il.value+2*wl.value.float_delivery_fee),1),rl]),dl]),u("div",ul,[u("ul",null,[u("li",{onClick:s[1]||(s[1]=l=>c(x).push("/order/pay/order_remark"))},[tl,0!==Object.keys(c(gl).orderRemark).length?(y(),d("span",ol,p(c(gl).orderRemark.join(",")),1)):(y(),d("span",cl,"口味、偏好等")),u("span",null,[t(n,{size:"15",color:"#666666"},{default:o((()=>[t(c(C))])),_:1})])]),u("li",{onClick:s[2]||(s[2]=l=>c(x).push("/order/pay/ticket"))},[pl,vl,u("span",null,[t(n,{size:"15",color:"#666666"},{default:o((()=>[t(c(C))])),_:1})])])])]),_l]),u("footer",null,[ml,u("div",{class:"right",onClick:s[3]||(s[3]=l=>c(x).push({path:"/order/pay/main-pay"}))}," 确定下单 ")]),Al.value?(y(),d("div",fl,[yl,u("ul",null,[u("li",{onClick:Ol},[hl,u("span",null,[t(n,{size:"20",color:"rgba(115, 115, 115, 0.3)"},{default:o((()=>[t(c(j))])),_:1})])]),u("li",{onClick:Ol},[kl,u("span",null,[t(n,{size:"20",color:"#4CD964"},{default:o((()=>[t(c(j))])),_:1})])])])])):m("",!0),Al.value?(y(),d("div",{key:1,class:"mask",onClick:Ol})):m("",!0)],64)}}}),[["__scopeId","data-v-b5458309"]]);export{gl as default};
