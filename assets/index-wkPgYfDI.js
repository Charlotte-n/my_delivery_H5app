import{d as s,n as l,r as a,D as e,o as n,X as i,c as r,f as d,e as t,w as u,u as o,l as c,m as p,t as v,F as m,i as _,q as f,v as y,E as h,b as k,x as g,s as j,a6 as x,g as C,bd as b,p as z,h as w,_ as D}from"./index-mV6jAJcw.js";import{v as I}from"./el-loading-dqimmT6V.js";import{d as A}from"./user-6cLxAl33.js";import{a as E}from"./order-kah_0DHZ.js";import{u as F}from"./cart-7i05R0CA.js";import{f as O}from"./formate_img-ey60ccwK.js";import{e as P}from"./delivery-home-P8IFB8c4.js";import{u as R}from"./order-973wXf2S.js";import{b as q,c as B}from"./pullDown-_P2zCMiU.js";import"./use-global-config-cR9LpW4d.js";import"./index-HC5mE-n5.js";import"./get-LVbWSPPF.js";import"./index-nURT9tW6.js";import"./index-s902GNGE.js";import"./index-fssVXj-i.js";const G=s=>(z("data-v-c1b0981a"),s=s(),w(),s),H={class:"header"},L={class:"left"},X=G((()=>d("div",{class:"middle"},[d("span",{class:"text1-ellipsis text"}," 确认订单 ")],-1))),Y={class:"right"},J={key:0,style:{height:"100vh"}},K={class:"icon_location"},M={class:"detail_address"},N={class:"user_info"},Q={class:"address_info"},S={class:"icon_right"},T={class:"arrive_time"},U=G((()=>d("div",{class:"left"},"送达时间",-1))),V={class:"right"},W={class:"pay"},Z=G((()=>d("span",null,"支付方式",-1))),$=G((()=>d("span",null,"在线支付",-1))),ss=G((()=>d("div",{class:"red_package"},[d("span",null,"红包 "),d("span",null,"暂时只在饿了么APP中支持 ")],-1))),ls={class:"orderlist"},as={class:"order_header"},es=["src"],ns={class:"title"},is={class:"order_content"},rs={class:"num"},ds=G((()=>d("span",null,"餐盒",-1))),ts=G((()=>d("span",null,"配送费",-1))),us={class:"all_money"},os=G((()=>d("span",null,"订单",-1))),cs={class:"money"},ps=G((()=>d("span",null,"待支付",-1))),vs=G((()=>d("div",null,null,-1))),ms={class:"order"},_s=G((()=>d("span",null,"订单备注",-1))),fs={key:0,class:"text1-ellipsis"},ys={key:1},hs=G((()=>d("span",null,"发票抬头",-1))),ks=G((()=>d("span",null,"不需要开发票",-1))),gs=G((()=>d("div",{style:{height:"10vw"}},null,-1))),js=G((()=>d("div",{class:"left"},"待支付 ￥1349",-1))),xs={key:0,class:"pay_method_mask"},Cs=G((()=>d("div",{class:"title"},"支付方式",-1))),bs=G((()=>d("span",{style:{color:"rgba(115, 115, 115, 0.3)","font-size":"4.5vw"}},"货到付款(商家不知道货到付款)",-1))),zs=G((()=>d("span",{style:{"font-size":"4.5vw"}},"在线支付",-1))),ws=D(s({__name:"index",setup(s){const z=f(),w=y(),D=l(),G=F(),ws=R(),Ds=w.params.restaurant_id,Is=()=>{history.go(-1)},As=D.address,Es=a({}),Fs=a([]),Os=a({}),Ps=e((()=>{var s;return null==(s=G.cartItems[Ds])?void 0:s.reduce(((s,l)=>s+l.count*l.price),0)})),Rs=a(!1),qs=()=>{Rs.value=!1},Bs=()=>{Rs.value=!Rs.value},Gs=a(!1),Hs=()=>{};return n((async()=>{Gs.value=!0,await(async()=>{if(0===Object.keys(D.address).length){const s=await A(D.userInfo.user_id);D.setAddress(s[0])}Es.value=await E(D.userInfo.user_id,Ds),Fs.value=G.CartList(Ds),Os.value=await P(Ds)})(),Gs.value=!1,q(Hs)})),i((()=>{B(Hs)})),(s,l)=>{var a,e;const n=h,i=I;return k(),r(m,null,[d("header",null,[d("div",H,[d("div",L,[t(n,{size:"25",onClick:Is},{default:u((()=>[t(o(g))])),_:1})]),X,d("div",Y,[t(n,{size:"25",onClick:l[0]||(l[0]=s=>o(z).push("/user"))},{default:u((()=>[t(o(j))])),_:1})])])]),d("main",null,[Gs.value?c((k(),r("div",J,null,512)),[[i,Gs.value]]):p("",!0),d("div",{class:"address",onClick:l[1]||(l[1]=s=>o(z).push({path:"/order/pay/address"}))},[d("div",K,[t(n,{size:"20"},{default:u((()=>[t(o(x))])),_:1})]),d("div",M,[d("div",N,[d("span",null,v(o(As).name),1),d("span",null,v(1===o(As).sex?"女士":"先生"),1),d("span",null,v(o(As).phone),1)]),d("div",Q,[d("span",null,v(o(As).tag),1),d("span",null,v(o(As).address),1)])]),d("div",S,[t(n,null,{default:u((()=>[t(o(C))])),_:1})])]),d("div",T,[U,d("div",V,[d("span",null,"尽快送达 | 预计"+v(Os.value.order_lead_time)+"分钟送达",1),d("span",null,v(null==(a=Os.value.delivery_mode)?void 0:a.text),1)])]),d("div",W,[d("div",{class:"pay_method",onClick:Bs},[Z,$,d("span",null,[t(n,{size:"12",color:"#666666"},{default:u((()=>[t(o(C))])),_:1})])]),ss]),d("div",ls,[d("div",as,[d("img",{src:o(O)(Os.value.image_path),alt:""},null,8,es),d("div",ns,v(null==(e=Es.value._doc)?void 0:e.restaurant_name),1)]),d("div",is,[d("ul",null,[(k(!0),r(m,null,_(Fs.value,(s=>(k(),r("li",{key:s.item_id},[d("span",null,v(s.name),1),d("span",rs,"x "+v(s.count),1),d("span",null,"￥"+v(s.price),1)])))),128)),d("li",null,[ds,d("span",null,"￥"+v(Os.value.float_delivery_fee),1)]),d("li",null,[ts,d("span",null,"￥"+v(Os.value.float_delivery_fee),1)])])]),d("div",us,[os,d("span",cs,"￥"+v(Ps.value+2*Os.value.float_delivery_fee),1),ps]),vs]),d("div",ms,[d("ul",null,[d("li",{onClick:l[2]||(l[2]=s=>o(z).push("/order/pay/order_remark"))},[_s,0!==Object.keys(o(ws).orderRemark).length?(k(),r("span",fs,v(o(ws).orderRemark.join(",")),1)):(k(),r("span",ys,"口味、偏好等")),d("span",null,[t(n,{size:"15",color:"#666666"},{default:u((()=>[t(o(C))])),_:1})])]),d("li",{onClick:l[3]||(l[3]=s=>o(z).push("/order/pay/ticket"))},[hs,ks,d("span",null,[t(n,{size:"15",color:"#666666"},{default:u((()=>[t(o(C))])),_:1})])])])]),gs]),d("footer",null,[js,d("div",{class:"right",onClick:l[4]||(l[4]=s=>o(z).push({path:"/order/pay/main-pay"}))}," 确定下单 ")]),Rs.value?(k(),r("div",xs,[Cs,d("ul",null,[d("li",{onClick:qs},[bs,d("span",null,[t(n,{size:"20",color:"rgba(115, 115, 115, 0.3)"},{default:u((()=>[t(o(b))])),_:1})])]),d("li",{onClick:qs},[zs,d("span",null,[t(n,{size:"20",color:"#4CD964"},{default:u((()=>[t(o(b))])),_:1})])])])])):p("",!0),Rs.value?(k(),r("div",{key:1,class:"mask",onClick:qs})):p("",!0)],64)}}}),[["__scopeId","data-v-c1b0981a"]]);export{ws as default};
