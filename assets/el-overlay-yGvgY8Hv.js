import{a6 as e,aw as o,o as t,b8 as l,G as s,ap as a,ab as n,K as r,bn as d,b6 as u,D as i,a8 as c,a9 as p,bo as f,a5 as m,aT as v,z as y,an as b,d as g,e as h,R as C,a4 as k,V as x,C as w,b as E,c as M,f as I,L,u as A,t as S,w as B,ar as R,j as $,E as F,s as T,S as j,U as D,ao as z,r as _,a7 as O,J as P,bl as Y,av as N,B as H,H as V,aR as X,bp as q,O as U,P as W,T as Z,b2 as G,Z as K}from"./index-eoNkYDbX.js";import{P as J}from"./vnode-9D-w6KT_.js";import{i as Q,C as ee}from"./icon-Ff9vjNDK.js";import{u as oe}from"./index-Bfc1uJIH.js";import{F as te,i as le,E as se}from"./focus-trap-tcDesNVZ.js";import{U as ae}from"./event-DkVV3hnh.js";import{u as ne}from"./index-hESYVpqZ.js";import{u as re}from"./index-oGjgkpg6.js";import{a as de}from"./use-global-config-Fc2HFCOy.js";import{t as ue}from"./error-lyDbv7Kx.js";import{u as ie}from"./index-ntgJKiwL.js";let ce;const pe=(e,o,n)=>{let r={offsetX:0,offsetY:0};const d=o=>{const t=o.clientX,l=o.clientY,{offsetX:s,offsetY:n}=r,d=e.value.getBoundingClientRect(),u=d.left,i=d.top,c=d.width,p=d.height,f=document.documentElement.clientWidth,m=document.documentElement.clientHeight,v=-u+s,y=-i+n,b=f-u-c+s,g=m-i-p+n,h=o=>{const d=Math.min(Math.max(s+o.clientX-t,v),b),u=Math.min(Math.max(n+o.clientY-l,y),g);r={offsetX:d,offsetY:u},e.value&&(e.value.style.transform=`translate(${a(d)}, ${a(u)})`)},C=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",C)},u=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",d)};t((()=>{l((()=>{n.value?o.value&&e.value&&o.value.addEventListener("mousedown",d):u()}))})),s((()=>{u()}))},fe=(o,t={})=>{n(o)||ue("[useLockscreen]","You need to pass a ref param to this function");const l=t.ns||r("popup"),s=d((()=>l.bm("parent","hidden")));if(!e||u(document.body,s.value))return;let a=0,v=!1,y="0";const b=()=>{setTimeout((()=>{m(null==document?void 0:document.body,s.value),v&&document&&(document.body.style.width=y)}),200)};i(o,(o=>{if(!o)return void b();v=!u(document.body,s.value),v&&(y=document.body.style.width),a=(o=>{var t;if(!e)return 0;if(void 0!==ce)return ce;const l=document.createElement("div");l.className=`${o}-scrollbar__wrap`,l.style.visibility="hidden",l.style.width="100px",l.style.position="absolute",l.style.top="-9999px",document.body.appendChild(l);const s=l.offsetWidth;l.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",l.appendChild(a);const n=a.offsetWidth;return null==(t=l.parentNode)||t.removeChild(l),ce=s-n,ce})(l.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=c(document.body,"overflowY");a>0&&(t||"scroll"===n)&&v&&(document.body.style.width=`calc(100% - ${a}px)`),p(document.body,s.value)})),f((()=>b()))},me=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},ve=y({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:b([String,Array,Object])},zIndex:{type:b([String,Number])}});const ye=g({name:"ElOverlay",props:ve,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const l=r("overlay"),{onClick:s,onMousedown:a,onMouseup:n}=me(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?h("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:n},[C(o,"default")],J.STYLE|J.CLASS|J.PROPS,["onClick","onMouseup","onMousedown"]):k("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(o,"default")])}}),be=Symbol("dialogInjectionKey"),ge=y({center:Boolean,alignCenter:Boolean,closeIcon:{type:Q},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),he=["aria-level"],Ce=["aria-label"],ke=["id"],xe=g({name:"ElDialogContent"});var we=D(g({...xe,props:ge,emits:{close:()=>!0},setup(e){const t=e,{t:l}=oe(),{Close:s}=ee,{dialogRef:a,headerRef:n,bodyId:r,ns:d,style:u}=x(be),{focusTrapRef:i}=x(te),c=w((()=>[d.b(),d.is("fullscreen",t.fullscreen),d.is("draggable",t.draggable),d.is("align-center",t.alignCenter),{[d.m("center")]:t.center},t.customClass])),p=((...e)=>t=>{e.forEach((e=>{o(e)?e(t):e.value=t}))})(i,a),f=w((()=>t.draggable));return pe(a,n,f),(e,o)=>(E(),M("div",{ref:A(p),class:L(A(c)),style:j(A(u)),tabindex:"-1"},[I("header",{ref_key:"headerRef",ref:n,class:L(A(d).e("header"))},[C(e.$slots,"header",{},(()=>[I("span",{role:"heading","aria-level":e.ariaLevel,class:L(A(d).e("title"))},S(e.title),11,he)])),e.showClose?(E(),M("button",{key:0,"aria-label":A(l)("el.dialog.close"),class:L(A(d).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[h(A(F),{class:L(A(d).e("close"))},{default:B((()=>[(E(),$(R(e.closeIcon||A(s))))])),_:1},8,["class"])],10,Ce)):T("v-if",!0)],2),I("div",{id:A(r),class:L(A(d).e("body"))},[C(e.$slots,"default")],10,ke),e.$slots.footer?(E(),M("footer",{key:0,class:L(A(d).e("footer"))},[C(e.$slots,"footer")],2)):T("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Ee=y({...ge,appendToBody:Boolean,appendTo:{type:b(String),default:"body"},beforeClose:{type:b(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Me={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>z(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ie=["aria-label","aria-labelledby","aria-describedby"],Le=g({name:"ElDialog",inheritAttrs:!1});const Ae=K(D(g({...Le,props:Ee,emits:Me,setup(o,{expose:l}){const s=o,n=H();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},w((()=>!!n.title))),ie({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},w((()=>!!s.customClass)));const d=r("dialog"),u=_(),c=_(),p=_(),{visible:f,titleId:m,bodyId:v,style:y,overlayDialogStyle:b,rendered:g,zIndex:k,afterEnter:x,afterLeave:M,beforeLeave:S,handleClose:R,onModalClick:F,onOpenAutoFocus:D,onCloseAutoFocus:z,onCloseRequested:K,onFocusoutPrevented:J}=((o,l)=>{var s;const n=P().emit,{nextZIndex:r}=ne();let d="";const u=re(),c=re(),p=_(!1),f=_(!1),m=_(!1),v=_(null!=(s=o.zIndex)?s:r());let y,b;const g=de("namespace",Y),h=w((()=>{const e={},t=`--${g.value}-dialog`;return o.fullscreen||(o.top&&(e[`${t}-margin-top`]=o.top),o.width&&(e[`${t}-width`]=a(o.width))),e})),C=w((()=>o.alignCenter?{display:"flex"}:{}));function k(){null==b||b(),null==y||y(),o.openDelay&&o.openDelay>0?({stop:y}=N((()=>M()),o.openDelay)):M()}function x(){null==y||y(),null==b||b(),o.closeDelay&&o.closeDelay>0?({stop:b}=N((()=>I()),o.closeDelay)):I()}function E(){o.beforeClose?o.beforeClose((function(e){e||(f.value=!0,p.value=!1)})):x()}function M(){e&&(p.value=!0)}function I(){p.value=!1}return o.lockScroll&&fe(p),i((()=>o.modelValue),(e=>{e?(f.value=!1,k(),m.value=!0,v.value=le(o.zIndex)?r():v.value++,O((()=>{n("open"),l.value&&(l.value.scrollTop=0)}))):p.value&&x()})),i((()=>o.fullscreen),(e=>{l.value&&(e?(d=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=d)})),t((()=>{o.modelValue&&(p.value=!0,m.value=!0,k())})),{afterEnter:function(){n("opened")},afterLeave:function(){n("closed"),n(ae,!1),o.destroyOnClose&&(m.value=!1)},beforeLeave:function(){n("close")},handleClose:E,onModalClick:function(){o.closeOnClickModal&&E()},close:x,doClose:I,onOpenAutoFocus:function(){n("openAutoFocus")},onCloseAutoFocus:function(){n("closeAutoFocus")},onCloseRequested:function(){o.closeOnPressEscape&&E()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:u,bodyId:c,closed:f,style:h,overlayDialogStyle:C,rendered:m,visible:p,zIndex:v}})(s,u);V(be,{dialogRef:u,headerRef:c,bodyId:v,ns:d,rendered:g,style:y});const Q=me(F),ee=w((()=>s.draggable&&!s.fullscreen));return l({visible:f,dialogContentRef:p}),(e,o)=>(E(),$(G,{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},[h(Z,{name:"dialog-fade",onAfterEnter:A(x),onAfterLeave:A(M),onBeforeLeave:A(S),persisted:""},{default:B((()=>[W(h(A(ye),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":A(k)},{default:B((()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:A(m),"aria-describedby":A(v),class:L(`${A(d).namespace.value}-overlay-dialog`),style:j(A(b)),onClick:o[0]||(o[0]=(...e)=>A(Q).onClick&&A(Q).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>A(Q).onMousedown&&A(Q).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>A(Q).onMouseup&&A(Q).onMouseup(...e))},[h(A(se),{loop:"",trapped:A(f),"focus-start-el":"container",onFocusAfterTrapped:A(D),onFocusAfterReleased:A(z),onFocusoutPrevented:A(J),onReleaseRequested:A(K)},{default:B((()=>[A(g)?(E(),$(we,X({key:0,ref_key:"dialogContentRef",ref:p},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:A(ee),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,"aria-level":e.headerAriaLevel,onClose:A(R)}),q({header:B((()=>[e.$slots.title?C(e.$slots,"title",{key:1}):C(e.$slots,"header",{key:0,close:A(R),titleId:A(m),titleClass:A(d).e("title")})])),default:B((()=>[C(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:B((()=>[C(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):T("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ie)])),_:3},8,["mask","overlay-class","z-index"]),[[U,A(f)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{Ae as E};
